title: Инструкция по верстке записей для блога
-
author: shuraluberetsky
-
short-content: В этом документе на примерах показаны приемы верстки в шаблонизаторе Stacey. Приведены примеры Markdown и HTML-разметки для решения типичных задач.
-
content: 
Самый главный заголовок
=======

Язык разметки Markdown
-------

Основным для шаблонизатора Stacey является язык разметки [Markdown](http://en.wikipedia.org/wiki/Markdown). Выше уже показана верстка заголовков, которые в HTML превратятся в теги `<h1>` и `<h2>`, а также гиперссылок.

Параграфы в Markdown отделяются пустой строкой. Из простых "украшений" текста имеются *курсивный* и **полужирный** шрифты (точнее, они соответствуют HTML-тегам `<em>` и `<strong>`) и `выделение кода`. Внутри последнего не работают ни HTML, ни Markdown-разметка, и используется моноширинный шрифт. Более сложные конструкции определяются используемым &laquo;расширением&raquo; PHP Markdown Extra, и нет ничего разумнее, чем привести здесь же ссылки на документацию по языку и его расширениям:

- [Документация Markdown](http://daringfireball.net/projects/markdown/syntax/)
- [Документация PHP Markdown Extra](http://michelf.com/projects/php-markdown/extra/)

Дальше я приведу еще несколько примеров, расписывая их немного менее подробно - за нюансами обращайтесь к документации.

Еще один способ верстки заголовков
-------

Заголовки, которые в HTML обозначаются тегами `<h1>` и `<h2>`, в Markdown "подчеркиваются" строкой из знаков равенства (`=`) и дефисов (`-`) соответственно. Кроме того, заголовки вплоть до `<h6>` можно отметить знаками "решетки" в начале строки - один для `<h1>`, два для `<h2>` и так далее:

### Пример заголовка третьего,

#### четвертого,

##### пятого

###### и шестого уровней.

Разумеется, довольно сложно найти документ, где все эти заголовки будут использоваться одновременно.

Цитаты (blockquote)
-------

Для того, чтобы выделить абзац как цитату, достаточно поставить перед ним знак "больше" - так, как принято указывать цитирование в email.

> У некоторых новобранцев есть еще штыки этого образца; эти штыки мы у них отбираем и достаем для них другие.
>
> Впрочем, штык во многом утратил свое значение. Теперь пошла новая мода ходить в атаку: некоторые берут с собой только ручные гранаты и лопату. Отточенная лопата — более легкое и универсальное оружие, ею можно не только тыкать снизу, под подбородок, ею прежде всего можно рубить наотмашь. Удар получается более увесистый, особенно если нанести его сбоку, под углом, между плечом и шеей; тогда легко можно рассечь человека до самой груди. Когда колешь штыком, он часто застревает; чтобы его вытащить, нужно с силой упереться ногой в живот противника, а тем временем тебя самого свободно могут угостить штыком. К тому же он иногда еще и обламывается.

Списки
------

- Markdown поддерживает
- как обычные

1. так и
2. нумерованные
3. списки

Преформатированный текст
------

Как и положено языку разметки, придуманному программистами, в Markdown особое внимание уделяется отображению кода (или преформатированного текста). Я уже `приводил пример` выделения кода в тексте. Для того, чтобы показать таким образом целый блок кода, достаточно вставить его со сдвигом на 4 пробела или одну позицию табуляции:

	#include <stdio.h>
	
	int main(void){
		printf("Hello, World!\r\n");
		return 0;
	}

Внутри блоков кода не работает ни HTML, ни Markdown-разметка.

Гиперссылки и изображения
------

Я выше уже приводил примеры указания гиперссылок, например, на [документацию Markdown](http://daringfireball.net/projects/markdown/syntax/). Применительно к Stacey не лишним будет указать, как дать ссылки на файлы в каталоге текущей страницы. Для этого надо указать в ссылке переменную _&#64;path_, которая содержит путь к нему. Например, по этой ссылке можно найти [файл, соответствующий текущей странице](@path/blog-post.txt).

Аналогичный синтаксис используется для изображений. Пример вставки картинки довольно прост:

![alt-text, например, "Наглое и неприкрытое нарушение правил парковки"](@path/640x480picture.png "Атрибут Title, куда можно написать что-то вроде &laquo;Куда смотрит ГИБДД?&raquo;")

Можно объединить теги для картинок и гиперссылок - то есть сделать кликабельную картинку.

[![Встреча баржеводов напротив ГЗ МГУ](@path/pano-sml.jpg)](@path/pano.jpg)

Таблицы
-------

PHP Markdown Extra позволяет довольно легко верстать простые таблицы без HTML - а выглядят они вот так:

Заголовок 1  | Заголовок 2
-------------|--------------
Ячейка 1     | Ячейка 2
Ячейка 3     | Ячейка 4

Для более сложных таблиц придется перейти к непосредственной HTML-верстке, которая описана в следующем разделе.

HTML на страницах сайта
-------

Интерпретатор Markdown сохраняет HTML-разметку, благодаря чему можно забыть про этот язык разметки и писать простой HTML-код, например, вот так (все тот же пример с кликабельной картинкой):

<a href="@path/pano.jpg"><img src="@path/pano-sml.jpg" alt="Встреча баржеводов напротив ГЗ МГУ"></a>

Благодаря этому можно использовать и код вставки для роликов с Youtube, например:

<object width="425" height="344">
  <param name="movie" value="http://www.youtube.com/v/oU4E6uQmQIg&hl=en&fs=1&rel=0"></param>
  <param name="allowFullScreen" value="true"></param>
  <param name="allowscriptaccess" value="always"></param>
  <embed src="http://www.youtube.com/v/oU4E6uQmQIg&hl=en&fs=1&rel=0" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="425" height="344"></embed>
</object>

Аналогичным образом можно вставить на страницу и панораму с сайта - к сожалению, при изменении каких-то путей к ее файлам, придется менять этот код вручную. Удобнее всего его копировать со страниц панорамы.

<script type="text/javascript" src="@root_path/content/04.tours/01.mario/tour.js"></script>
<div class="row margin-40">
<div class="span12">
<section id="pano" style="height: 500px; width: 100%">
<script>
embedpano({swf:"@root_path/content/04.tours/01.mario/tour.swf", xml:"@root_path/content/04.tours/01.mario/tour.swf.xml", target:"pano", html5:"auto", passQueryParameters:true});
</script>
</section>
</div>
</div>

К сожалению, похоже, что особенности krpano могут привести к некорректному отображению нескольких панорам на одной странице, особенно - в режиме HTML5.

-
